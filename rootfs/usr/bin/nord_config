#!/usr/bin/with-contenv bash

[[ -n ${DNS} ]] && nordvpn set dns ${DNS//[;,]/ }

[[ -n ${CYBER_SEC} ]] && nordvpn set cybersec ${CYBER_SEC}
[[ -n ${OBFUSCATE} ]] && nordvpn set obfuscate ${OBFUSCATE}
[[ -n ${FIREWALL} ]] && nordvpn set firewall ${FIREWALL}
#[[ -n ${KILLSWITCH} ]] && nordvpn set killswitch ${KILLSWITCH}

[[ -n ${PROTOCOL} ]] && nordvpn set protocol ${PROTOCOL}
nordvpn set technology ${TECHNOLOGY:-NordLynx}

[[ -n ${PORTS} ]] && for port in ${PORTS//[;,]/ }; do nordvpn whitelist add port "${port}"; done
[[ -n ${PORT_RANGE} ]] && nordvpn whitelist add ports ${PORT_RANGE}

exit 0